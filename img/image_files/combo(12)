YUI.add("note-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{create:function(t){return e.ModelCreators["flickr-photos-addNotes"].run(t,this.appContext)},update:function(t,n){var r;return r={noteId:t,noteX:this.getValue(t,"left"),noteY:this.getValue(t,"top"),noteW:this.getValue(t,"width"),noteH:this.getValue(t,"height"),noteText:this.getValue(t,"text")},e.ModelUpdaters["flickr-photos-editNote"].run(r,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-deleteNote"].run(t,this.appContext)}},attributes:{authorName:{setter:function(e){return e}},author:{setter:function(e){return e}},left:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},top:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},width:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},height:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},text:{setter:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addNotes-creator","flickr-photos-editNote-updater","flickr-photos-deleteNote-deletor","attribute-helpers"]});
YUI.add("flickr-photos-deleteAutotags-deletor",function(e,t){"use strict";function n(n,r){return r.callAPI("flickr.photos.deleteAutotags",n).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-photos-deleteAutotags"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("autotag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{"delete":function(t){return e.ModelDeletors["flickr-photos-deleteAutotags"].run(t,this.appContext)}},attributes:{autotagValue:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},score:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},isPrivate:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},searchUrl:{derivedBy:["autotagValue"],readOnly:!0,defaultFn:function(e){var t=this.getValue(e,"autotagValue");return"/search/?q="+t}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-deleteAutotags-deletor"]});
YUI.add("photo-autotags-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{"delete":function(t){return e.ModelDeletors["flickr-photos-deleteAutotags"].run(t,this.appContext)}},attributes:{autotags:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-deleteAutotags-deletor"]});
YUI.add("flickr-photos-setPerms-updater",function(e,t){"use strict";function n(e,t){var n=e[0],r=e[1],i;i=r.attributeSearch({normalizedId:t.nsid},!0),i.forEach(function(e){r.remove(e)});if(t.full_response)return n.photoIdsSent=t.photo_ids,n}function r(n,r){var i=this;return n.nsid=r.getViewer().nsid,e.Promise.all([r.callAPI("flickr.photos.setPerms",n),r.getModelRegistry("photostream-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setPerms"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setMeta-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.full_response=1,i.photo_ids=n.photoId):i.photo_id=n.photoId,typeof n.title!="undefined"&&(i.title=n.title),typeof n.description!="undefined"&&(i.description=n.description),e.Promise.all([r.callAPI("flickr.photos.setMeta",i),r.getModelRegistry("photo-models")]).then(function(t){var r=t[0],i=t[1];if(n.fullResponse){if("errors"in r)return r.api="setMeta",r}else{if(!i.exists(n.photoId))throw new Error("[flickr-photos-setMeta-updater] - Photo model can not be updated if it does not exist");!r.photo||!r.photo.title||!r.photo.description?e.Flog.warn("[flickr-photos-setMeta-updater] - No updated data returned from API."):i.setValues(n.photoId,{title:r.photo.title.content,description:r.photo.description.content})}},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setMeta"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setMeta"]={run:n}},"@VERSION@",{requires:["flickr-promise","flog"],optional:[]});
YUI.add("flickr-photos-licenses-setLicense-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.license_id=n.license,r.callAPI("flickr.photos.licenses.setLicense",i).then(function(e){if("errors"in e)return e.api="setLicense",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setLicense"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-licenses-setLicense"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setSafetyLevel-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.safety_level=n.safetyLevel+1,r.callAPI("flickr.photos.setSafetyLevel",i).then(function(e){if("errors"in e)return e.api="setSafety",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setSafety"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setSafetyLevel"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[];return("title"in n||"description"in n)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license.newVal},this.appContext)),"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:n.safetyLevel.newVal},this.appContext)),e.Promise.all(r)},batchUpdate:function(t,n){var r=[];return"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:parseInt(n.safetyLevel,10),fullResponse:1},this.appContext)),"title"in n&&"description"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,description:n.description,fullResponse:1},this.appContext)):"title"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,fullResponse:1},this.appContext)):"description"in n&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,description:n.description,fullResponse:1},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license,fullResponse:1},this.appContext)),e.Promise.all(r)}},getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,getGuestpass:function(t){var n=this;return new e.Promise(function(e,r){n.getValue(t,"guestpass")?e():n.appContext.callAPI("flickr.sharing.createGuestpass",{photo:t}).then(function(r){n.setValue(t,"guestpass",r.guestpass.url),e()})})},attributes:{title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,canPublicComment:e.PhotoModelHelper.attributes.canPublicComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,owner:{isModel:!0},engagement:{isModel:!0},isHD:{},secret:{},canAddMeta:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},isMarketplacePrintable:{defaultFn:function(e){return!1}},isMarketplaceLicensable:e.PhotoModelHelper.attributes.isMarketplaceLicensable,marketplaceLicensingUrl:e.PhotoModelHelper.attributes.marketplaceLicensingUrl,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},guestpass:{},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},sizesForAlbum:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(t){var n=this.getValue(t,"sizes");return e.Object.each(n,function(e,t){e.src=e.url}),n}},curation:{isModel:!0},visibilitySource:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","photo-model-helper","photo-curation-models","flickr-photos-getInfo-fetcher","flickr-photos-setPerms-updater","flickr-photos-setMeta-updater","flickr-photos-licenses-setLicense-updater","flickr-photos-setSafetyLevel-updater","attribute-helpers"]});
YUI.add("flickr-photos-getInfo-fetcher",function(e,t){"use strict";function n(t){var n,r;return n=["sizes","icon_urls","ignored","rev_ignored","venue","datecreate"].join(","),n=n+","+e.APIHelper.request.getRebootPhotoExtras(),r={datecreate:1,extras:n,photo_id:t.id,get_contexts:1,primary_photo_extras:"url_sq, url_t, url_s, url_m"},t.userId?r.user_id=t.userId:t.pathAlias&&(r.path_alias=t.pathAlias),t.context&&(r.context=t.context,r.num_prev=1,r.num_next=1),t.scrappy&&(e.APIHelper.request.addStaticMapsParams(r),delete r.get_contexts,delete r.primary_photo_extras,delete r.context),r}function r(t,n,r){var s=t.apiResponse,o=t.photoRegistry,u=t.personRegistry,a=t.personRelationshipRegistry,f=t.photoEngagementRegistry,l=t.photoStatsRegistry,c=t.photoPrivacyRegistry,h=t.photoNotesRegistry,p=t.noteRegistry,d=t.photoGeoRegistry,v=t.photoLocationRegistry,m=t.photoHeadMetaRegistry,g=t.groupRegistry,y,b={},w,E,S,x,T,N,C=[],k,L,A;w={id:s.photo.id,title:s.photo.title.content,description:s.photo.description.content,sizes:e.APIHelper.response.parsePhotoSize(s.photo.sizes.size,!0),needsInterstitial:s.photo.needsInterstitial,canComment:s.photo.editability.cancomment,canPublicComment:s.photo.publiceditability.cancomment,canAddMeta:s.photo.editability.canaddmeta,safetyLevel:s.photo.safetyLevel,license:s.photo.license,mediaType:s.photo.media,secret:s.photo.secret,isHD:e.APIHelper.response.isHD(s.photo.sizes.size),rotation:s.photo.rotation,hasInvalidColorspaceForPrint:s.photo.hasInvalidColorspaceForPrint,isMarketplacePrintable:s.photo.isMarketplacePrintable,isMarketplaceLicensable:s.photo.isMarketplaceLicensable?s.photo.isMarketplaceLicensable:!1,marketplaceLicensingUrl:s.photo.marketplaceLicensingUrl?s.photo.marketplaceLicensingUrl:"",oWidth:s.photo.oWidth?parseInt(s.photo.oWidth,10):"",oHeight:s.photo.oHeight?parseInt(s.photo.oHeight,10):"",visibilitySource:s.photo.visibilitySource},E={id:s.photo.owner.nsid,username:s.photo.owner.username,realname:s.photo.owner.realname,pathAlias:s.photo.owner.pathAlias,buddyicon:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.photo.owner.iconurls),isAdFree:s.photo.owner.isAdFree,isPro:s.photo.owner.ispro,dateCreated:s.photo.owner.datecreate,location:s.photo.owner.location},S={id:s.photo.owner.nsid,pathAlias:s.photo.owner.pathAlias,isContact:s.photo.contactIscontact,isFamily:s.photo.contactIsfamily,isFriend:s.photo.contactIsfriend,isIgnored:s.photo.owner.isignored,isIgnoredBy:s.photo.owner.revIgnored},x={id:s.photo.id,ownerNsid:s.photo.owner.nsid,isFaved:s.photo.isfavorite||!1,canShare:s.photo.usage.canshare,canDownload:s.photo.usage.candownload,commentCount:s.photo.comments.content,noteCount:s.photo.notes&&s.photo.notes.note&&s.photo.notes.note.length,faveCount:s.photo.countFaves,viewCount:s.photo.views},T={id:s.photo.id,dateTaken:s.photo.dates.taken,datePosted:s.photo.dates.posted,takenGranularity:s.photo.dates.takengranularity,isDateTakenUnknown:s.photo.datetakenunknown||s.photo.datetakenunknown==="1"||s.photo.datetakenunknown===1},k={id:s.photo.id,title:s.photo.HTMLMETA["og:title"],noindexfollow:s.photo.owner.noindexfollow,keywords:s.photo.HTMLMETA.keywords,"og:title":s.photo.HTMLMETA["og:title"],"og:description":s.photo.HTMLMETA["og:description"],"og:type":s.photo.HTMLMETA["og:type"],"og:url":s.photo.HTMLMETA["og:url"],"og:image":s.photo.HTMLMETA["og:image"],"og:image:width":s.photo.HTMLMETA["og:image:width"],"og:image:height":s.photo.HTMLMETA["og:image:height"],"flickr_photos:by":s.photo.HTMLMETA["flickr_photos:by"],"flickr_photos:camera":s.photo.HTMLMETA["flickr_photos:camera"],"flickr_photos:sets":s.photo.HTMLMETA["flickr_photos:sets"],"flickr_photos:groups":s.photo.HTMLMETA["flickr_photos:groups"],"flickr_photos:galleries":s.photo.HTMLMETA["flickr_photos:galleries"],"twitter:card":s.photo.HTMLMETA["twitter:card"],"twitter:description":s.photo.HTMLMETA["twitter:description"],"twitter:app:url:iphone":s.photo.HTMLMETA["twitter:app:url:iphone"],"twitter:creator":s.photo.HTMLMETA["twitter:creator"],pinterest:s.photo.HTMLMETA.pinterest},N={id:s.photo.id,isPublic:s.photo.visibility.ispublic,isVisibleByFriends:s.photo.visibility.isfriend,isVisibleByFamily:s.photo.visibility.isfamily,permAddMeta:s.photo.permissions?s.photo.permissions.permaddmeta:0,permComment:s.photo.permissions?s.photo.permissions.permcomment:0},s.photo&&s.photo.notes&&s.photo.notes.note&&e.Array(s.photo.notes.note).forEach(function(e){C.push(p.addOrUpdate({id:e.id,authorName:e.authorname,author:e.author,left:e.x,top:e.y,width:e.w,height:e.h,text:e.content}))}),L=e.ModelFetchers["flickr-photos-getLocation"].mapResponse(s,d),w.owner=u.addOrUpdate(E),w.engagement=f.addOrUpdate(x),a.addOrUpdate(S),A=o.addOrUpdate(w),s.photo.isMarketplacePrintable&&A.setValue("isMarketplacePrintable",!0),s.photo.isMarketplaceLicensable&&A.setValue("isMarketplaceLicensable",!0),l.addOrUpdate(T),c.addOrUpdate(N),h.addOrUpdate({id:w.id,notes:C}),m.addOrUpdate(k),v.addOrUpdate(L),s.photo.contexts&&(y=t.contextsRegistry,b.faves=t.favoriteRegistry,b.gallery=t.galleryRegistry,b.pool=t.groupsPoolRegistry,b.set=t.setRegistry,b.stream=t.photostreamRegistry,i({photoModel:A,contextRegistries:b,contextsResponse:s.photo.contexts,personRegistry:u,contextsRegistry:y,photoEngagementRegistry:f,photoStatsRegistry:l,groupRegistry:g,apiParams:r}))}function i(t){var n=t.photoModel,r=t.contextRegistries,i=t.contextsResponse,s=t.personRegistry,o=t.contextsRegistry,u=t.photoEngagementRegistry,a=t.photoStatsRegistry,f=t.photoCurationModelRegistry,l=t.groupRegistry,c=t.apiParams,h=[];e.Object.each(r,function(t,r){i[r]&&e.Array.each(i[r],function(r){e.APIHelper.response.addContextToRegistry(r,t,s,l),h.push(t.proxy(r.id)),c.context&&function(){var i,o,l,h,p,d,v,m,g;i=t.getValue(r.id,"photoContextList"),o=i.hasMinBoundary?i.hasMinBoundary():!1,l=i.hasMaxBoundary?i.hasMaxBoundary():!1,h=i.getList(),d=r.nextphotos,v=r.prevphotos,m=d?e.APIHelper.response.parsePhotos({photos:d.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry
:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[],g=v?e.APIHelper.response.parsePhotos({photos:v.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[];if(g.length||m.length)p=e.APIHelper.response.addOrReplaceListByContext({model:n,next:m,prev:g.reverse(),current:h,hasMin:o,hasMax:l,numNext:c.num_next,numPrev:c.num_prev});t.setValue(r.id,"photoContextList",p)}()})}),o.exists(n.id)||(o.add({id:n.id,totalGroups:i.pool?i.pool.length:0,totalSets:i.set?i.set.length:0,totalGalleries:i.gallery?i.gallery.length:0}),o.setValue(n.id,"contexts",h))}function s(n,r){var i=this,s;return r.flipper.isFlipped("enable-scrappy-photo-page")&&(n.scrappy=!0),s=this._processParams(n),(new e.FlickrPromise({apiResponse:r.callAPI("flickr.photos.getInfo",s),photoRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),personRelationshipRegistry:r.getModelRegistry("person-relationship-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models"),photoCurationModelRegistry:r.getModelRegistry("photo-curation-models"),photoPrivacyRegistry:r.getModelRegistry("photo-privacy-models"),photoNotesRegistry:r.getModelRegistry("photo-notes-models"),noteRegistry:r.getModelRegistry("note-models"),photoGeoRegistry:r.getModelRegistry("photo-geo-models"),photoLocationRegistry:r.getModelRegistry("photo-location-models"),photoHeadMetaRegistry:r.getModelRegistry("photo-head-meta-models"),groupRegistry:r.getModelRegistry("group-models"),contextsRegistry:r.getModelRegistry("photo-contexts-models"),favoriteRegistry:r.getModelRegistry("favorite-models"),galleryRegistry:r.getModelRegistry("gallery-models"),groupsPoolRegistry:r.getModelRegistry("group-pool-models"),setRegistry:r.getModelRegistry("set-models"),photostreamRegistry:r.getModelRegistry("photostream-models")})).then(function(e){return i._processResponse(e,r.flipper,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-photos-getInfo"]={run:s,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","flickr-photos-getLocation-fetcher"],optional:["photo-models","person-models","person-relationship-models","photo-engagement-models","photo-stats-models","photo-curation-models","photo-geo-models","photo-location-models","photo-head-meta-models","note-models","photo-notes-models","autotag-models","photo-autotags-models"]});
YUI.add("photo-geo-models",function(e){function r(e){r.superclass.constructor.call(this,e)}var t=1,n=16;e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext).then(function(e){return e},function(){})},update:function(t,n){var r={photo_id:t,lat:this.getValue(t,"latitude"),lon:this.getValue(t,"longitude")};n.hasOwnProperty("accuracy")&&(r.accuracy=this.getValue(t,"accuracy"));if(n.hasOwnProperty("isPublic")||n.hasOwnProperty("isContact")||n.hasOwnProperty("isFriend")||n.hasOwnProperty("isFamily"))r.is_public=Number(this.getValue(t,"isPublic")),r.is_contact=Number(this.getValue(t,"isContact")),r.is_friend=Number(this.getValue(t,"isFriend")),r.is_family=Number(this.getValue(t,"isFamily"));return e.ModelUpdaters["flickr-photos-geo-setLocation"].run(r,this.appContext)}},attributes:{hasGeo:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},latitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},longitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},accuracy:{validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(r){return e.AttributeHelpers.coerceInteger(Math.max(t,Math.min(r,n)))||undefined},defaultValue:t},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isContact:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFriend:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher","attribute-helpers","flickr-photos-geo-setLocation-updater"]});
YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGpu:null,initializer:function(t){return this.photoId=t.photoId,this.disableIfSmall=!!t.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGpu=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGpu=!1)),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.templates("zoom")({})||"";return this.setContainerHTML(e),this},activate:function(){var t=this,n=t.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),t.registerEventHandler(t.get("container").on("click",function(n){n.preventDefault(),t.cursorCoords=[n.pageX-e.config.win.pageXOffset,n.pageY-e.config.win.pageYOffset],e.rapidTracker.beacon(t.name,"zoomInClick"),t.zoomIn(t.cursorCoords)})),t.attachKeyEvent("down:90",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomInKeyPress"),t.zoomIn()},100)),t.attachKeyEvent("down:90,27",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomOutKeyPress"),t.zoomOut()},100),n),t.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(n){var r=[t.currentZoomRegion.left,t.currentZoomRegion.top],i=200;n.preventDefault();switch(n.button){case 37:r[0]+=i;break;case 38:r[1]+=i;break;case 39:r[0]-=i;break;case 40:r[1]-=i}e.rapidTracker.beacon(t.name,"zoomPanKeyPress"),t.panZoomNode(r)},16),n),t.registerEventHandler(t.appContext.flapp.before("activeViewChange",function(e){t.cleanUp()}))),this},getZoomEdgeMargin:function(){return 100},panZoomNodeToCurrentCoords:function(){if(!this.zoomedIn)return;var e=this.cursorCoords,t=this.getZoomPanCoordsForCursor(e);if(!t)return;this.panZoomNode(t)},panZoomNode:function(e){if(this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1])return;e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e},constrainPanCoords:function(e){var t,n,r,i,s=this.getZoomEdgeMargin(),o=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],u=[this.zoomImageFullWidth,this.zoomImageFullHeight],a=[u[0]+2*s,u[1]+2*s];return t=0,n=o[0]-u[0]-2*s,r=0,i=o[1]-u[1]-2*s,e[0]>t?e[0]=t:e[0]<n&&(e[0]=n),e[1]>r?e[1]=r:e[1]<i&&(e[1]=i),u[0]<o[0]&&(e[0]=.5*(o[0]-a[0])),u[1]<o[1]&&(e[1]=.5*(o[1]-a[1])),e},getZoomPanCoordsForCursor:function(e){if(!e)return;var t=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],i=[r[0]+2*t,r[1]+2*t],s=[e[0]/n[0],e[1]/n[1]],o=[s[0]*(n[0]-i[0]),s[1]*(n[1]-i[1])];return o},getZoomSmallRegion:function(){var t=this.get("container");return{left:t.getX()-e.config.win.pageXOffset-this.getZoomEdgeMargin(),top:t.getY()-e.config.win.pageYOffset-this.getZoomEdgeMargin(),width:parseInt(t.getStyle("width"),10),height:parseInt(t.getStyle("height"),10)}},resizeZoomNode:function(t,n){var r=this,i,s,o=e.config.win.performance&&e.config.win.performance.now;return n?new e.Promise(function(n,u){function a(e){var u=o?e-i:Date.now()-i,a=u/r.getZoomTransitionTime(),f;return a>=1?(f=t,r.isAnimatingZoom=!1,setTimeout(function(){n()},r.getZoomTransitionTime())):f={left:s.left+(t.left-s.left)*a,top:s.top+(t.top-s.top)*a,width:s.width+(t.width-s.width)*a,height:s.height+(t.height-s.height)*a},f}function f(n){var i=a(n);if(r.zoomingIn||r.zoomingOut)r.resizeZoomNode(i,!1),i!==t&&e.config.win.requestAnimationFrame(f)}r.isAnimatingZoom=!0,i=o?e.config.win.performance.now():Date.now(),s=r.currentZoomRegion,e.config.win.requestAnimationFrame(f)}):(this.currentZoomRegion=t,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+t.left+"px, "+t.top+"px) scale("+t.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},getZoomTransitionTime:function(){return 200},zoomOut:function(){var t=this,n=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),n.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers),this.resizeZoomNode(this.getZoomSmallRegion(),!0),n.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){t.zoomingOut&&n&&n._node&&(t.parentViewContainer.removeClass("zoomed"),n.removeClass("hiding"),n.addClass("hidden"),setTimeout(function(){t.zoomingOut&&(t.cleanUp(),this.zoomingOut=!1)},200))},this.getZoomTransitionTime()+0),delete this.pendingCoords,delete this.currentCoords},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),delete this.zoomNode,delete this.zoomPhotoContainerNode,this.zoomAnimationHandle.detach())},isImageReadyToDisplay:function(e){var t;return e?(t=new Image,t.src=e,t.complete||t.naturalWidth):!1},getZoomKeyScope:function(){return this.name+this._yuid},zoomMouseMoveHandler:function(t){this.cursorCoords=[t.pageX-e.config.win.pageXOffset,t.pageY-e.config.win.pageYOffset],this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var t=e.wheelDeltaX,n=e.wheelDeltaY;t===undefined&&(t=-e.deltaX||0),n===undefined&&(n=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+t,this.currentZoomRegion.top+n])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),t=this.parentViewContainer.one(".main-photo");return{small:e?e.getAttribute("src"):"",medium:t?t.getAttribute("src"):"",large:this.getLargestSize()}},getLargestSize:function(){var e=this.appContext.flipper.isFlipped("enable-zoom-proxy"),t=this.appContext.flipper.config["zoom-proxy-prefix"],n;return e&&t?(n=this.get("photo").getLargestSize({excludeSizes:[]}),n.key==="o"&&(console.log("proxyPrefix",t,"largestSize.displayUrl"
,n.displayUrl),n.displayUrl=n.url=t+"http:"+n.displayUrl,console.log("proxying original",n.url))):n=this.get("photo").getLargestSize(),n},zoomIn:function(t){var n=this,r,i,s=this.getSizes(),o=this.isImageReadyToDisplay(s.medium),u=this.isImageReadyToDisplay(s.large.url),a=this.getZoomPixelRatio(),f=this.getZoomSmallRegion(),l,c,h,p=this.maxMsgNode;if(this.disableIfSmall&&f.width>=s.large.width){p||(p=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+n.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(p)||(p.addClass("hidden"),this.get("container").append(p)),setTimeout(function(){p&&p.inDoc()&&(p.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){p&&p.inDoc()&&p.addClass("hidden")},3e3))},0);return}e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.zoomAnimationHandle=e.AnimationManager.subscribe(function(){var r=n.getDeteriorationRateForEasing(),i,s,o={x:0,y:0},u={x:0,y:0},a={x:0,y:0};if(n.pendingCoords){o.x=parseInt(n.pendingCoords[0],10),o.y=parseInt(n.pendingCoords[1],10),n.currentCoords?(u.x=n.currentCoords[0],u.y=n.currentCoords[1]):(i=n.getZoomPanCoordsForCursor(t),s=n.constrainPanCoords(i),u.x=parseInt(s[0],10),u.y=parseInt(s[1],10)),o.x<u.x?a.x=u.x-Math.abs(o.x-u.x)*r:a.x=u.x+Math.abs(o.x-u.x)*r,o.y<u.y?a.y=u.y-Math.abs(o.y-u.y)*r:a.y=u.y+Math.abs(o.y-u.y)*r,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===u.x&&(o.x<u.x?a.x=u.x-1:o.x>u.x&&(a.x=u.x+1)),a.y===u.y&&(o.y<u.y?a.y=u.y-1:o.y>u.y&&(a.y=u.y+1));if(a.x!==o.x||a.y!==o.y)(n.forceGpu===!0||e.config.win.devicePixelRatio>1)&&n.forceGpu!==!1?n.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):n.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)");n.currentCoords=[a.x,a.y],a.x===o.x&&a.y===o.y&&delete n.pendingCoords}}),this.zoomNode?(this.zoomingOut=!1,r=this.zoomNode,r.removeClass("hiding"),r.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers)):r=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:o?s.medium:s.small,largeSrc:u?s.large.url:""})),i=this.zoomPhotoContainerNode=r.one(".zoom-photo-container"),this.zoomImageFullWidth=s.large.width/a,this.zoomImageFullHeight=s.large.height/a,t||(t=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2],n.cursorCoords=t),l=this.getZoomPanCoordsForCursor(t),l=this.constrainPanCoords(l),c={left:l[0],top:l[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},i.setStyle("transition","none"),this.resizeZoomNode(f,!1),r.on("click",function(t){if(n.zoomingIn)return;t.preventDefault(),e.rapidTracker.beacon(n.name,"zoomOutClick"),n.zoomOut()}),e.one("body").append(r),i.setStyle("width",c.width),i.setStyle("height",c.height),e.soon(function(){n.zoomingIn&&(r.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document?e.use("event-touch",function(){n.touchHandlers=[],n.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&e.changedTouches.length===1&&(n.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),n.touchHandlers.push(e.on("touchmove",function(e){var t=e.pageX,r=e.pageY,i,s;n.touching&&e.changedTouches.length&&e.changedTouches.length===1&&(t=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY,e.preventDefault(),i=t-n.touching[0],s=r-n.touching[1],n.touching=[t,r],n.panZoomNode([n.currentZoomRegion.left+i,n.currentZoomRegion.top+s]))})),n.touchHandlers.push(e.on("touchend",function(e){delete n.touching}))}):(r.on("mousemove",n.zoomMouseMoveHandler.bind(n)),n.mouseWheelHandler=function(){var e=n.zoomScrollWheelHandler.bind(n);return h="onwheel"in document.createElement("div")?"wheel":"mousewheel",document.addEventListener(h,e,!1),{detach:function(){document.removeEventListener(h,e,!1)}}}()),n.parentViewContainer.addClass("zoomed"),n.resizeZoomNode(c,!0).then(function(){n.zoomingIn&&(n.zoomingIn=!1,n.zoomedIn=!0,n.panZoomNodeToCurrentCoords(),u||i.append('<img src="'+s.large.url+'" class="zoom-large">'))}))})},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){return 1}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","zoom-css","hermes-template-zoom","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});
YUI.add("hermes-lang-photo-page-scrappy_fr-fr",function(e,t){e.Intl.add("hermes/photo-page-scrappy","fr-FR",{PAGE_TITLE:["${title}"," | Flickr - Partage de photos\u00a0!"],BACK_TO:["Retour \u00e0 ","${entryType}"],COULDNT_UPDATE_SETTINGS:["Nous n\u2019avons pas pu mettre vos param\u00e8tres \u00e0 jour"],ADULT_CONTENT:["Contenu pour adulte"],MATURE_AUDIENCES:["Ce contenu est r\u00e9serv\u00e9 \u00e0 un public adulte."],USER_DISCRETION:["La discr\u00e9tion est recommand\u00e9e."],SHOW_ME_THIS_CONTENT_TYPE:["Me montrer ce type de contenu d\u00e9sormais"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['Vous pouvez \u00e0 tout moment changer les <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">param\u00e8tres SafeSearch</a> dans les pr\u00e9f\u00e9rences de votre compte.'],SIGNED_IN_FOR_CONTENT:["Vous devez \u00eatre connect\u00e9 pour voir ce contenu."],VIDEO_COMING_SOON:["Prise en charge des vid\u00e9os disponible tr\u00e8s prochainement"],FIND_OUT_MORE_AD:["En savoir plus \u00e0 ","${brand}"],SHARE_THIS_PHOTO:["Partager cette photo"],DOWNLOAD_THIS_VIDEO:["T\u00e9l\u00e9charger cette vid\u00e9o"],DOWNLOAD_THIS_PHOTO:["T\u00e9l\u00e9charger cette photo"],VIEW_ALL_SIZES:["Afficher toutes les tailles"],DOWNLOAD_PHOTO:["T\u00e9l\u00e9charger la photo"],SOME_RIGHTS_RESERVED:["Certains droits r\u00e9serv\u00e9s"],DOWNLOAD:["T\u00e9l\u00e9charger"],ERROR_LOADING_CONTEXT:["Erreur lors du chargement du contexte"],ADD_TITLE:["Ajouter un titre"],ADD_DESCRIPTION:["Ajouter une description"],TITLE_DESCRIPTION_FAILURE:["Vous n'avons pas pu modifier le titre et la description \u00e0 l'heure actuelle."],VIEW_PREVIOUS_COMMENT:["Afficher le commentaire pr\u00e9c\u00e9dent"],VIEW_MORE_PREVIOUS_COMMENTS:["Afficher les ","${count}"," commentaires pr\u00e9c\u00e9dents"],EMPTY_COMMENT_ERROR:["Une zone de commentaires vide\u00a0? Cela ne fonctionnera pas\u00a0!"],COMMENT_RATE_LIMIT_ERROR:["Calmez-vous\u00a0! Afin de prot\u00e9ger la communaut\u00e9 Flickr des spams et des comportements s'y apparentant, nous avons impos\u00e9 quelques restrictions aux commentaires."],COMMENT_POST_ERROR:["Nous n\u2019avons pas pu publier votre commentaire."],MORE_COMMENTS_ERROR:["Nous n\u2019avons pas pu obtenir d\u2019autres commentaires."],COMMENT_PERMALINK_ERROR:["Nous n'avons pas pu trouver les commentaires sp\u00e9cifi\u00e9s sur la photo."],DELETE_COMMENT:["Supprimer un commentaire"],COMMENT_DELETE_CONFIRMATION:["Voulez-vous vraiment supprimer ce commentaire\u00a0?"],COMMENT_DELETE_ERROR:["Nous n\u2019avons pas pu supprimer votre commentaire."],COMMENT_LOADING_ERROR:["Erreur lors du chargement des commentaires"],COMMENT:["Commenter"],SHOW_MORE_COMMENTS:["${count}"," plus"],REPLY:["R\u00e9pondre"],PERMALINK:["Permalien"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> a ajout\u00e9 cet \u00e9l\u00e9ment dans les favoris"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> et <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> ont ajout\u00e9 cet \u00e9l\u00e9ment dans les favoris"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> et <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> ont ajout\u00e9 cet \u00e9l\u00e9ment dans les favoris"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> et <a class="remaining-faved-by" href="#">',"${count}"," autres personnes</a> ont ajout\u00e9 cet \u00e9l\u00e9ment dans les favoris"],RELATIONSHIP_FRIEND_ERROR:["Un probl\u00e8me s\u2019est produit lors de la configuration de votre relation d\u2019ami."],RELATIONSHIP_FAMILY_ERROR:["Un probl\u00e8me s\u2019est produit lors de la configuration de votre relation de famille."],HIDE_EXIF:["Masquer l'EXIF"],SHOW_EXIF:["Afficher l'EXIF"],EDIT_LOCATION:["Modifier le lieu"],EDIT_LOCATION_ORGANIZR:["Nous travaillons d'arrache-pied au remaniement de notre toute nouvelle exp\u00e9rience photo. Pour l'instant, vous pouvez modifier le lieu dans Organizer."],SAVE_LOCATION:["Enregistrer la position"],APERTURE:["Ouverture"],FOCAL_LENGTH:["Distance focale"],EXPOSURE_TIME:["Temps d'exposition"],FLASH_AUTO_FIRED:["Flash (automatique, d\u00e9clench\u00e9)"],FLASH_AUTO_NO_FIRE:["Flash (automatique, non d\u00e9clench\u00e9)"],FLASH_ON_FIRED:["Flash (activ\u00e9, d\u00e9clench\u00e9)"],FLASH_ON_NO_FIRE:["Flash (activ\u00e9, non d\u00e9clench\u00e9)"],FLASH_OFF:["Flash (\u00c9teint, non d\u00e9clench\u00e9)"],FLASH_SIMPLE_ON:["Activ\u00e9"],FLASH_SIMPLE_OFF:["D\u00e9sactiv\u00e9"],POWERED_BY:["D\u00c9VELOPP\u00c9 PAR"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Ajouter cette photo \u00e0 votre carte"],SINGULAR_FAVE:["favori"],PLURAL_FAVE:["favoris"],SINGULAR_VIEW:["vue"],PLURAL_VIEW:["vues"],SINGULAR_COMMENT:["commentaire"],PLURAL_COMMENT:["commentaires"],LICENSE_ERROR:["Un probl\u00e8me s\u2019est produit lors du changement de licence de votre photo"],ALL_RIGHTS_RESERVED:["Tous droits r\u00e9serv\u00e9s"],NO_RESTRICTIONS:["Aucune restriction de droits d\u2019auteur connue"],PUBLIC_DOMAIN:["Domaine public"],USA_GOV_WORK:["Travail du Gouvernement des \u00c9tats-Unis"],SAFETY_CHANGE_ERROR:["Une erreur s'est produite lors du changement du niveau de s\u00e9curit\u00e9 de votre photo"],PRIVACY_CHANGE_ERROR:["Un probl\u00e8me s\u2019est produit lors du changement de la confidentialit\u00e9 de votre photo"],COMMENT_PERM_CHANGE_ERROR:["Une erreur s'est produite lors du changement de la permission de commenter de votre photo"],FLAG_PHOTO:["Classer cette photo"],MARK_FOR_REVIEW:["Marquer pour r\u00e9vision"],ADDITIONAL_INFO
:["Informations suppl\u00e9mentaires"],VIEWING_THIS_PHOTO:["Affichage de cette photo"],PRIVACY_UPDATE_ERROR:["Une erreur s'est produite lors de la mise \u00e0 jour de la confidentialit\u00e9. Veuillez r\u00e9essayer."],META_PERMS_UPDATE_ERROR:["Une erreur s'est produite lors de la mise \u00e0 jour de l'autorisation d'ajouter des m\u00e9tadonn\u00e9es. Veuillez r\u00e9essayer."],ADD_META_TO_THIS_PHOTO:["Ajouter des tags et des personnes \u00e0 cette photo"],COMMENT_PERMS_UPDATE_ERROR:["Une erreur s'est produite lors de la mise \u00e0 jour de la permission de commenter. Veuillez r\u00e9essayer."],COMMENTING_ON_THIS_PHOTO:["Commentaires sur cette photo"],SAFETY_UPDATE_ERROR:["Une erreur s'est produite lors de la mise \u00e0 jour du niveau de s\u00e9curit\u00e9. Veuillez r\u00e9essayer."],SAFETY_LEVEL_OF_PHOTO:["Niveau de s\u00e9curit\u00e9 de cette photo"],FLAG_ERROR:["Une erreur s'est produite lors de la tentative d'ajout de drapeau \u00e0 cette photo. Veuillez r\u00e9essayer."],PROVIDE_FEEDBACK:["Votre avis sur la nouvelle page photo"],ERROR_DELETING_AUTOTAG:["Une erreur est survenue lors de la suppression d'Autotag"],AUTOTAGS:["Autotags"],CONTACT_LIST_ERROR:["Une erreur est survenue lors de la tentative de r\u00e9cup\u00e9ration de votre liste de contacts. Veuillez r\u00e9essayer."],FAILED_TO_REMOVE_PERSON:["La suppression de cette personne de la photo a \u00e9chou\u00e9 pour le moment."],PERSON_CANNOT_BE_TAGGED:["Cette personne ne peut pas \u00eatre identifi\u00e9e."],PEOPLE_IN_PHOTO:["Personnes sur la photo"],ADD_PEOPLE:["Ajouter des personnes"],ADD_PERSON:["Ajouter une personne"],ERROR_REMOVING_FROM_GROUP:["Un probl\u00e8me est survenu lors de la suppression de cette photo du groupe"],ERROR_ACCEPTING_INVITATION:["Un probl\u00e8me est survenu lors de l'acceptation de l'invitation du groupe"],SEARCH_GROUPS:["Recherchez des groupes"],PHOTO_NOT_IN_GROUPS:["Cette photo ne figure actuellement dans aucun groupe"],ADD_TO_GROUP:["Ajouter \u00e0 un groupe"],INVITE_TO_GROUP:["Inviter dans un groupe"],ONE_GROUP_INVITATION:["Vous avez 1\u00a0invitation \u00e0 un groupe"],N_GROUP_INVITATIONS:["Vous avez ","${count}"," invitations \u00e0 un groupe"],VIEW_MORE_GROUPS:["Afficher plus de groupes"],ERROR_REMOVING_FROM_ALBUM:["Un probl\u00e8me est survenu lors de la suppression de cette photo de l'album"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["Vous \u00eates sur le point de supprimer la derni\u00e8re photo d'un album, ce qui aura pour effet de supprimer l'album lui-m\u00eame."],REMOVE_PHOTO_AND_ALBUM:["Supprimer la photo et l'album"],ADD_PHOTO_TO_ALBUM:["Ajouter cette photo \u00e0 un album"],SEARCH_ALBUMS:["Rechercher dans les albums"],ADD_TO_ALBUM:["Ajouter \u00e0 l\u2019album"],PHOTO_NOT_IN_ALBUMS:["Cette photo ne figure actuellement dans aucun album"],VIEW_MORE_ALBUMS:["Afficher plus d'albums"],PHOTO_IN_ONE_ALBUM:["Cette photo figure dans 1\u00a0album"],PHOTO_IN_N_ALBUMS:["Cette photo figure dans ","${count}","\u00a0albums"],INVITE_PENDING:["Invitation en attente"],CANCEL_INVITE:["Annuler l\u2019invitation"],ACCEPT_INVITE:["Accepter l'invitation"],ONE_ITEM:["1\u00a0\u00e9l\u00e9ment"],N_ITEMS:["${count}","\u00a0\u00e9l\u00e9ments"],ERROR_REMOVING_FROM_GALLERY:["Un probl\u00e8me est survenu lors de la suppression de cette photo de l'expo"],SEARCH_GALLERIES:["Rechercher dans les expos"],ADD_TO_GALLERY:["Ajouter \u00e0 l\u2019expo"],PHOTO_NOT_IN_GALLERIES:["Cette photo ne figure actuellement dans aucune expo"],VIEW_MORE_GALLERIES:["Afficher plus d'expos"],PHOTO_IN_ONE_GALLERY:["Cette photo figure dans 1\u00a0expo"],PHOTO_IN_N_GALLERIES:["Cette photo se trouve dans ","${count}","\u00a0galeries"],DELETE_PHOTO:["Supprimer la photo"],PERMANTENTLY_DELETE:["Voulez-vous supprimer d\u00e9finitivement cette photo\u00a0?"],EDIT_PHOTO:["Modifier la photo"],NO_VIDEOS_IN_AVIARY:["Les vid\u00e9os ne peuvent pas \u00eatre modifi\u00e9es dans Aviary"],ENHANCE_WITH_AVIARY:["Am\u00e9liorer avec Aviary"],NO_VIDEO_ROTATION:["Impossible de faire pivoter les vid\u00e9os"],ROTATE:["Pivoter"],NO_VIDEO_REPLACE:["Impossible de remplacer les vid\u00e9os"],REPLACE:["Remplacer"],PHOTO_NAVIGATION:["Navigation dans les photos"],THUMBNAIL_NAVIGATION:["Navigation dans les vignettes"],ZOOM:["Zoom"],VIEW_IN_LIGHTBOX:["Afficher sur fond noir"],BACK_TO_CONTEXT:["Retour \u00e0 la galerie"],ADD_TAG:["Ajouter un tag"],GO_TO_ORGANIZER:["Aller \u00e0 Organizr"],ALBUM:["album"],ALBUMS:["albums"],ERROR_LOADING_ALBUMS:["Un probl\u00e8me est survenu lors du chargement de vos albums."],ERROR_ADDING_PHOTO_TO_ALBUM:["Un probl\u00e8me est survenu lors de l\u2019ajout de cette photo \u00e0 l\u2019album."],ERROR_REMOVING_PHOTO_FROM_ALBUM:["Un probl\u00e8me est survenu lors de la suppression de cette photo de l\u2019album."],ERROR_LOADING_GROUPS:["Un probl\u00e8me est survenu lors du chargement des groupes auxquels vous pouvez ajouter des photos."],ERROR_ADDING_TO_GROUP:["Un probl\u00e8me est survenu lors de l\u2019ajout de cette photo au groupe."],ERROR_ADDING_TO_GROUP_NOT_OWNER:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe car vous n\u2019en \u00eates pas le propri\u00e9taire."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe. Vous n\u2019\u00eates pas membre du groupe."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["La photo est d\u00e9j\u00e0 dans le pool de ce groupe."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe car elle figure d\u00e9j\u00e0 dans le nombre maximum de pools du groupe."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe. Vous avez d\u00e9j\u00e0 ajout\u00e9 le nombre maximum de photos au pool."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Votre photo a \u00e9t\u00e9 mise dans la file d\u2019attente du groupe."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Votre photo est d\u00e9j\u00e0 dans la file d\u2019attente du groupe."
],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe. Pour de plus amples informations, reportez-vous aux exigences du groupe \u00e0 propos du type de support, du type de contenu, du niveau de s\u00e9curit\u00e9 et de l\u2019emplacement g\u00e9ographique."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["D\u00e9sol\u00e9, la photo n\u2019a pas pu \u00eatre ajout\u00e9e au groupe. Le groupe dispose du nombre maximum de photos permis dans un pool."],ERROR_INVITING_TO_GROUP:["Un probl\u00e8me est survenu lors de l\u2019invitation de cette photo au groupe."],ERROR_CANCELING_GROUP_INVITIATON:["Un probl\u00e8me est survenu lors de l\u2019annulation de l\u2019invitation de cette photo au groupe."],NO_MATCHES:["Aucune correspondance"],CREATE_NEW:["Cr\u00e9er"],ERROR_LOADING_GROUP_INVITATIONS:["Un probl\u00e8me est survenu lors du chargement des invitations au groupe pour cette photo."],NO_GROUP_INVITATIONS:["Aucune invitation au groupe en attente"],PENDING_INVITATIONS_FOR_PHOTO:["Invitations pour cette photo en attente"],LOADING_INVITATIONS:["Chargement d\u2019invitations en cours"],ERROR_LOADING_GALLERIES:["Un probl\u00e8me est survenu lors du chargement de vos Expos."],ERROR_ADDING_TO_GALLERY:["Un probl\u00e8me est survenu lors de l\u2019ajout de cette photo \u00e0 la Expo."],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["Le propri\u00e9taire de cette photo n\u2019autorise pas l\u2019ajout de la photo \u00e0 votre Expo."],ERROR_CREATING_GALLERY:["Un probl\u00e8me est survenu lors de la cr\u00e9ation de votre nouvelle Expo."],DATE_TAKEN_FORMAT:["La date doit respecter le format suivant\u00a0: MM/JJ/AAAA hh:mm:ss."],DATE_POSTED_FUTURE:["La date de publication ne doit pas \u00eatre ult\u00e9rieure \u00e0 aujourd\u2019hui."],DATE_UPLOADED_FUTURE:["La date d'importation ne peut pas \u00eatre une date future."],DATE_POSTED_FLICKR_JOIN:["La date de publication doit \u00eatre ult\u00e9rieure \u00e0 votre inscription \u00e0 Flickr."],DATE_UPLOADED_FLICKR_JOIN:["La date d'importation doit \u00eatre ult\u00e9rieure \u00e0 votre inscription \u00e0 Flickr."],ERROR_SAVING_DATE:["Erreur d\u2019enregistrement des dates"],DATE_INVALID:["Une ou plusieurs dates ne sont pas valides."],EDIT_DATES:["Modifier les dates"],DATE_TAKEN_ON:["Date de prise de vue, le"],DATE_POSTED_ON:["Date de publication le"],DATE_UPLOADED_ON:["Date d'importation sur"],TAKEN_CIRCA:["Prise environ ","${intlDate}"],TAKEN_SOMETIME_IN:["Prise \u00e0 un certain moment en ","${intlDate}"],TAKEN_IN:["Prise en ","${intlDate}"],TAKEN_ON:["Prise le ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Import\u00e9e le ","${intlDate}"],SOMETHING_WENT_WRONG:["Une erreur est survenue."],REFRESH_BROWSER:["Actualisez votre navigateur et r\u00e9essayez."],TWITTER_NOT_FOUND:["Compte Twitter introuvable dans l'article"],TUMBLR_NOT_FOUND:["Compte Tumblr introuvable dans l'article"],LINK:["Lier"],LINK_TO_VIDEO:["Lien vers cette vid\u00e9o\u00a0:"],LINK_TO_PHOTO:["Lien vers cette photo\u00a0:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Les liens ne sont pas disponibles pour les vid\u00e9os pour adulte"],PRIVATE_VIDEO_SHARE:["Cette vid\u00e9o est priv\u00e9e, voulez-vous vraiment la partager\u00a0?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Les liens ne sont pas disponibles pour les photos pour adulte"],PRIVATE_PHOTO_SHARE:["Cette photo est priv\u00e9e, voulez-vous vraiment la partager\u00a0?"],SHARING_RESTRICTED_VIDEO:["Le partage est restreint pour cette vid\u00e9o"],SHARING_RESTRICTED_PHOTO:["Le partage est restreint pour cette photo"],EMBED:["Int\u00e9grer"],PUBLIC_TO_SHARE:["Partagez cette photo publiquement pour afficher le code int\u00e9gr\u00e9"],SIZE:["Taille\u00a0:"],TITLE_AND_OWNER_AT_START:["Afficher le titre et le propri\u00e9taire au d\u00e9marrage"],SHARE_NOW:["Partager maintenant\u00a0!"],SHARE_PHOTO:["Partager une photo"],SHARE_ON_TWITTER:["Partager sur Twitter"],AUTHORIZE_FOR_TWITTER:["veuillez autoriser Flickr \u00e0 publier des articles sur Twitter"],SHARE_ON_TUMBLR:["Partager sur Tumblr"],PUBLISH_NOW:["Publier maintenant"],ADD_TO_QUEUE:["Ajouter \u00e0 la file d\u2019attente"],SAVE_AS_DRAFT:["Enregistrer comme brouillon"],AUTHORIZE_FOR_TUMBLR:["veuillez autoriser Flickr \u00e0 publier des articles sur Tumblr"],SHARE_VIA_MAIL:["Partager par e-mail"],SCREEN_NAME_OR_EMAIL:["Pseudo ou mail"],SQUARE:["Carr\u00e9"],SMALL:["Petite taille"],MEDIUM:["Taille moyenne"],LARGE:["Grande taille"],ORIGINAL:["Originale"],DUPLICATE_TAG:["Tag en double"],INVALID_TAG:["Tag non valide"],MAXIMUM_TAG_LIMIT:["Limite maximale de tag (76) atteinte"],MAX_TAG_LIMIT:["Nombre maximal de tag (75) atteint"],ERROR_ADDING_TAG:["Erreur lors de l\u2019ajout d\u2019un tag"],ERROR_DELETING_TAG:["Erreur lors de la suppression d\u2019un tag"],TAGS:["Tags"],ADD_TAGS:["Ajouter des tags"],ADD_A_TAG:["Ajouter un tag"],PHOTO_IN_ONE_GROUP:["Cette photo est dans 1\u00a0groupe"],PHOTO_IN_MANY_GROUPS:["Cette photo est dans ",{type:"number",valueName:"count"},"\u00a0groupes"],PHOTO_IN_NO_GROUPS:["Cette photo n\u2019est dans aucun groupe"],ADD_A_COMMENT:["Ajouter un commentaire"],COMMENT_TUTORIAL:["appuyez sur la touche Entr\u00e9e pour publier le commentaire et sur Maj+Entr\u00e9e pour cr\u00e9er une autre ligne"],SIGNED_IN_TO_POST_A_COMMENT:["Vous devez \u00eatre connect\u00e9 pour publier un commentaire"],SHARE:["Partager"],CODE:["Code"],INCLUDE_A_MESSAGE:["Inclure un message"],FOR_MORE_INFORMATION_SAFESEARCH:['Pour plus d\u2019informations, consultez <a href="//www.flickr.com/help/photos/?search=flag#145">cette FAQ</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">s\u00e9curis\u00e9e</a> et est conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">s\u00e9curis\u00e9e</a> et n\u2019est pas conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'
],FLAG_CONFIRMATION_MODERATE_WITHIN:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">mod\u00e9r\u00e9e</a> et est conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">mod\u00e9r\u00e9e</a> et n\u2019est pas conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">restreinte</a> et est conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['Cette photo est marqu\u00e9e comme \u00e9tant <a href="//www.flickr.com/help/filters/#258">restreinte</a> et n\u2019est pas conforme aux <a href="//www.flickr.com/account/prefs/safesearch/">param\u00e8tres SafeSearch</a>.'],PRIVATE_PHOTO:["Photo priv\u00e9e"],PHOTO_UNFIT_FOR_YOUR_EYES:["La photo n\u2019est pas adapt\u00e9e \u00e0 votre profil. Voici un chaton\u00a0: (^._.^)\uff89"],NO_PHOTO_WITH_THAT_ID:["Aucune photo trouv\u00e9e avec l\u2019identifiant ","${photoId}"],NO_MEMBERS_FOUND:["Aucun membre trouv\u00e9"],TAKEN_ON_INTL:["Prise le ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["T\u00e9l\u00e9charg\u00e9e le ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Prise en ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["Afficher dans la light\u00a0box"],ZOOM_MAX_MESSAGE:["Minute papillon\u00a0! Cette photo est d\u00e9j\u00e0 \u00e0 sa taille maximale."],CLICK_TO_FAVE_PHOTO:["Cliquez ici pour ajouter cette photo aux favoris."],CLICK_TO_FAVE_VIDEO:["Cliquez ici pour ajouter cette vid\u00e9o aux favoris."],BACK_TO_ACTIVITY_FEED:["Retour au flux d\u2019activit\u00e9"],BACK_TO_PHOTOSTREAM:["Retour \u00e0 Galerie"],BACK_TO_SHARED_PHOTOS:["Retour aux photos partag\u00e9es"],BACK_TO_ALBUM:["Retour \u00e0 l\u2019album"],BACK_TO_CONTACTS_LIST:["Retour \u00e0 la liste de contacts"],BACK_TO_FAVORITES:["Retour aux favoris"],BACK_TO_GALLERY:["Retour \u00e0 la galerie"],BACK_TO_PROFILE:["Retour au profil"],BACK_TO_EXPLORE:["Retour \u00e0 Explorer"],BACK_TO_COMMONS:["Retour \u00e0 Commons"],BACK_TO_GROUP:["Retour au groupe"],BACK_TO_GROUPS:["Retour aux groupes"],BACK_TO_MAP:["Retour \u00e0 la carte"],BACK_TO_SEARCH:["Retourner \u00e0 la recherche"],BACK_TO_TAG:["Back to tag"],ERROR_ADDING_PHOTOS_TO_ALBUM:["Un probl\u00e8me est survenu lors de l\u2019ajout de ces photos \u00e0 l\u2019album"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["Un probl\u00e8me est survenu lors de la suppression de ces photos de l\u2019album"],ERROR_CREATING_ALBUM:["Un probl\u00e8me est survenu lors de la cr\u00e9ation de votre nouvel album"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Application d\u2019un niveau de confidentialit\u00e9 plus stricte"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["L\u2019application d\u2019un niveau de confidentialit\u00e9 plus stricte engendrera la suppression de tous vos favoris. L\u2019URL de la photo sera \u00e9galement modifi\u00e9e."],TAGS_HELPER_TEXT:["Les tags sont des mots-cl\u00e9s qui permettent de trouver des photos plus facilement. Vous pouvez en ajouter autant que vous le souhaitez et les robots intelligents de Flickr en ajouteront d'autres pour vous aider."],TAGS_HELP_TEXT:["Les tags sont des mots-cl\u00e9s qui simplifient la recherche de photos dans Flickr. Ceux que vous ajoutez sont affich\u00e9s en gris fonc\u00e9. Nos amis les robots Flickr vont essayer de vous aider en ajoutant quelques tags\u00a0; ils appara\u00eetront entour\u00e9s de gris."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["Ce tag priv\u00e9 n'est visible que par vous, et par vos proches ou amis autoris\u00e9s \u00e0 voir cette photo."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["Ce tag priv\u00e9 n'est visible que par vous, car vous \u00eates un ami ou un membre de la famille du propri\u00e9taire de la photo."],CREATE_WALLART_WITH_PHOTO:["Cr\u00e9ez une d\u00e9coration murale avec cette photo"],ERROR_ROTATING_PHOTO:["Un probl\u00e8me s'est produit lors de la rotation de cette photo\u00a0; fermez l'application et r\u00e9essayez."],ROTATE_PHOTO:["Faire pivoter la photo"],ERROR_REPLACING_PHOTO:["Un probl\u00e8me s'est produit lors du remplacement de cette photo\u00a0; fermez l'application et r\u00e9essayez."],REPLACE_PHOTO:["Remplacer la photo"],PERMANENTLY_REPLACE:["Remplacer de mani\u00e8re permanente cette photo (\u00ab\u00a0","${photoTitle}","\u00a0\u00bb par ","${username}",") par <em>","${fileName}","</em>\u00a0?"],REPLACE_WARNING:["Le remplacement d'une photo ne peut pas \u00eatre annul\u00e9. Choisissez un fichier avec lequel remplacer cette photo."],REPLACE_UPLOADING:["Importation de <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO:["Un probl\u00e8me s'est produit lors de la suppression de cette photo\u00a0; fermez l'application et r\u00e9essayez."],SHOW_MORE_STATS:["Afficher plus de statistiques"],SIGNUP_AND_DOWNLOAD_TITLE:["Vous avez trouv\u00e9 une photo \u00e0 t\u00e9l\u00e9charger\u00a0!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Rejoignez Flickr pour acc\u00e9der \u00e0 des milliards de photos."],SIGNUP_AND_COMMENT_TITLE:["Commentez cette photo\u00a0!"],SIGNUP_AND_COMMENT_MESSAGE:["Rejoignez Flickr pour commenter cette photo."],IMMERSIFY:["Immersion"],SIGNUP_FOOTER_MESSAGE:["Rejoindre la communaut\u00e9 Flickr pour d\u00e9couvrir des photos exceptionnelles"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>',o={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</h2>\n			",s=n["if"].call(e,e.isSignedIn,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	</div>\n",r}function h(e,t){var r="",i,s;return r+="\n				<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n				<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n				<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n			",r}function p(e,t){var r="",i,s,o;return r+="\n				<p>",o={hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+' <a href="//',(s=n.host)?s=s.call(e,{hash:{},data:t}):(s=e.host,s=typeof s===f?s.apply(e):s),r+=a(s)+'/signin/" data-track="photoWellSignInClick">',o={hash:{intlName:"common.SIGN_IN"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</a></p>\n			",r}function d(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.isVideo,{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i;return r+='\n		<div class="videoplayer main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px; height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;"></div>\n	',r}function m(e,t){var r="",i;r+="\n\n		",i=n["if"].call(e,e.showFuzzy,{hash:{},inverse:l.program(12,y,t),fn:l.program(10,g,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function g(e,t){var r="",i;return r+='\n		<span class="restricted-image main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n		</span>\n		',r}function y(e,t){var r="",i,s,o;return r+='\n		<span class="facade-of-protection-neue" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n			',o={hash:{},data:t},r+=a((i=n.outlet||e.outlet,i?i.call(e,e["zoom-view"],o):u.call(e,"outlet",e["zoom-view"],o)))+'\n		</span>\n\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.src)?s=s.call(e,{hash:{},data:t}):(s=e.src,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="low-res-photo" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo is-hidden" onload="registerFirstPhoto(this)" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		<noscript>\n			<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		</noscript>\n		',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:l.program(6,d,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-ad",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='<a class="ad-frame" href="',(i=n.clickUrl)?i=i.call(e,{hash:{},data:t}):(i=e.clickUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'" data-track="ad_link_image" target="_blank">',r}function d(e,t){var r="",i,s;return r+='\n    <div class="ad-wrapper">\n        <img width=\'',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+'\'/>\n        <a class="ad-footer" href="',s={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.clickUrl,s):l.call(e,"renderTrustedMarkup",e.clickUrl,s)))+'" data-track="ad_link_bottom" target="_blank">\n            <h1>',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</h1>\n        </a>\n    </div>\n",r}function v(e,t){var r="",i;return r+="\n    <img width='",(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+"' />\n",r}function m(e,t){var r="",i,s;return r+='\n<div class="more-info"> \n\n	<span><i class="moneyball"></i> ',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</span>\n</div>\n</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this,h=n.blockHelperMissing;o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n",u={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n",u={hash:{},inverse:c.program(5,v,i),fn:c.noop,data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(7,m,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-ad",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-well-media-scrappy-view",function(e){var t=500,n=500,r=40,i;i={photo:{render:function(){var t=this,n,r=this.get("photo"),i,s,o,u="";t.preloadImage&&(t.preloadImage.onload=null),this.appContext.forceServerRender?(i=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}),s=i):(i=this.getPhotoForDisplay(),s=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),r.getValue("owner")&&(r.getValue("title").trim()===""?u=this.intlMessage({intlName:"common.UNTITLED"}):u=r.getValue("title"),u+=" | "+this.intlMessage({intlName:"common.BY_USER",user:r.getValue("owner").getValue("username")})),o=this.get("container").one(".main-photo");if(!o||parseInt(o.getAttribute("width"),10)!==i.width||parseInt(o.getAttribute("height"),10)!==i.height)n=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:s.url,highResSrc:i.url,imgAltText:u,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,"zoom-view":this.subviews["zoom-view"]?this.subviews["zoom-view"].get("container"):""}),this.setContainerHTML(n);return YUI.Env.isServer?(this.serverWidth=i.width,this.serverHeight=i.height):r.getValue("needsInterstitial")||(t.preloadImage=new Image,t.preloadImage.onload=function(){if(this.onloadFired)return;if(!t.isActiveAndInDOM())return;this.onloadFired=!0,e.rapidTracker.beacon(this.name,"photoPageShowedSize"+(/(?:_([a-z]))?\.jpg/.exec(i.url)[1]||"\u00f8").toUpperCase());var n=t.get("container").one(".low-res-photo"),r=t.get("container").one(".main-photo");r.removeClass("is-hidden").show(),n.hide()},t.preloadImage.src=i.url,t.preloadImage.complete&&t.preloadImage.onload()),this}},video:{render:function(){var t,n=this,r=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]});return this.player?(this.player.resize(i.width,i.height),this):(t=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:i.url,needsInterstitial:r.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.setContainerHTML(t),YUI.Env.isServer?this:(this.player=new e.FlickrVideoPlayer({container:this.get("container").one(".videoplayer"),model:r,appContext:this.appContext}),n.player.init().then(function(){}),this.on("destroy",function(){n.player.destroy(),n.player=null}),this))}},ad:{render:function(){var e,t,n;return this.adJSON?t=this.adJSON:(t=this.appContext.adManager.getAdJSON(),this.adJSON=t),n=this.getAdSize(t),e=this.templates("photo-well-ad")({width:n.width,height:n.height,src:t.url,clickUrl:t.clickUrl,brand:t.brand,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),adFrame:!0}),this.setContainerHTML(e),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-scrappy-zoom")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this),this},handleInterstitialDismissButtonClick:function(t){var n=this,r=this.get("personPreferences"),i=this.get("photo"),s=i.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),r.setValue("safeSearch",s),r.registry.remoteUpdate(n.appContext.auth.user.nsid).then(function(e){var t=i.registry.attributeSearch({needsInterstitial:!0});t.forEach(function(e){i.registry.getValue(e,"safetyLevel")<=r.getValue("safeSearch")&&i.registry.setValue(e,"needsInterstitial",!1)}),n.buildContainer()},function(t){e.Flog.error(t.message),e.Flog.error(t.stack),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&t[0]==="photoWellResized"&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this,n,r;return this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),this.registerEventHandler(e.on("flickr:display-note-box",function(i){n=e.Node.create('<div class="note-box"></div>'),r=t.get("container").one(".main-photo").getXY(),t.get("container").append(n),n.setStyles({top:i.noteBoxTop+t.get("container").one(".main-photo").getDOMNode().offsetTop,left:i.noteBoxLeft,width:i.noteBoxWidth,height:i.noteBoxHeight})})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},onError:function(t){var n=this;this.fire("subviewViewEvent","getDialogOffset",function(r){var i=e.Views.dialog.getInstance("dialog-alert",{content:t,attrs:{title:"Error",level:"warning",confirmLabel:"OK"},parent:n,offsetLeft:r,dialogClass:"scrappy-dialog"});i.show()})},getPhotoForDisplay:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r,i,s;return e&&e.canvasSize&&(t=e.canvasSize),r=this.get("photo").getSizeToFit(t,e),i=Math.min(t.height/n,r.height),s=Math.min(t.width/n,r.width/r.height*i),i=Math.min(i,r.height/r.width*s),{width:Math.round(s),height:Math.round(i),url:r.url,pixelRatio:r.width/s}},getAdSize:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=80,i=140,s,o;return this.appContext.flipper.isFlipped("moneyball-ads-type-b")&&(t.height-=(r+i)*
n,t.width-=i*n),s=Math.min(t.height/n,e.height),o=Math.min(t.width/n,e.width/e.height*s),s=Math.min(s,e.height/e.width*o),{width:o,height:s}},getCanvasSize:function(){var e,i=this.getPixelRatio(),s,o=this.get("container"),u,a,f,l,c={width:t,height:n};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=this.get("container").ancestor(),u=o.getStyle("paddingTop")?parseInt(o.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,a=o.getStyle("paddingBottom")?parseInt(o.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,l=r,f=r,s&&(e=s.get("region"),e.height=parseInt(s.getStyle("height").match(/[0-9]+/)[0],10)-(u+a),e.width=this.appContext.viewportData.viewport.width-(l+f))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(c={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:n,right:t,width:c.width,height:c.height}),e.height*=i,e.width*=i,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flog","flickr-view","moment","flickr-video-player","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-photo-well-ad"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-context-slider-photo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"currentImage"}function c(e,t){return"restricted-image"}function h(e,t){return"\n		<span class='play-slideshow'>&#9654;</span>\n		<span class='countdown-slideshow'></span>\n	"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<a class="context-thumb emptyImage ',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:u.noop,fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='" href="',(o=n.url)?o=o.call(t,{hash:{},data:i}):(o=t.url,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-track="contextSliderNextPhotoClick" style="background-image: url(',(o=n.background)?o=o.call(t,{hash:{},data:i}):(o=t.background,o=typeof o===a?o.apply(t):o),s+=f(o)+"); left: ",(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===a?o.apply(t):o),s+=f(o)+'px" data-photo-id="',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n	',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\n</a>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-photo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-slider-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+="\n	<div class='loadingError'>\n		<p>",s={hash:{intlName:"photo-page-scrappy.ERROR_LOADING_CONTEXT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'</p>\n		<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">',s={hash:{intlName:"common.RETRY"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</button></p>\n	</div>\n",r}function c(e,t){var r="",i;r+="\n\n	<div class='context-slider small-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n		<div class="wrapper is-ready clear-float small-photos">\n\n			<div class="slider">\n\n				',i=n.each.call(e,e.previousPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n				",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n\n\n				",i=n.each.call(e,e.nextPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n			</div>\n\n		</div>\n\n	</div>\n\n	",i=n["if"].call(e,e.showBigSlider,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function h(e,t){return"slideshowEnabled"}function p(e,t){var i="",s;i+="\n					",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function d(e,t){return'\n					<a class="context-thumb middle currentImage adThumb">Ad</a>\n				'}function v(e,t){var r="",i;r+="\n					",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function m(e,t){var i="",s;i+="\n						",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n					",i}function g(e,t){var r="",i,s,o;r+="\n		<div class='context-slider big-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n			<span class="nav nav-l">\n				<span class="hide-text">&larr;</span>\n			</span>\n\n			<div class="wrapper clear-float">\n\n				<div class="slider">\n\n					',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.previousBigPhotos,o):u.call(e,"renderTrustedMarkup",e.previousBigPhotos,o)))+"\n\n					",s=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(16,b,t),fn:f.program(14,y,t),data:t});if(s||s===0)r+=s;return r+="\n\n					",o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nextBigPhotos,o):u.call(e,"renderTrustedMarkup",e.nextBigPhotos,o)))+'\n\n				</div>\n\n			</div>\n\n			<span class="nav nav-r">\n				<span class="hide-text">&rarr;</span>\n			</span>\n\n		</div>\n	',r}function y(e,t){return'\n						<a class="context-thumb middle currentImage adThumb">Ad</a>\n					'}function b(e,t){var r="",i;r+="\n						",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function w(e,t){var i="",s;i+="\n							",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n						",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;o=n["if"].call(t,t.loadingError,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each(["context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo"]});
YUI.add("hermes-template-context-image",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n\n	<a data-loaded="false" style="left:',(i=n.left)?i=i.call(e,{hash:{},data:t}):(i=e.left,i=typeof i===o?i.apply(e):i),r+=u(i)+';float:left;display:block;position:absolute;background-color:gray;height:40px;width:86px;border:1px solid transparent;" href="#">\n		\n	</a>\n\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t.images,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-image",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-text",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='\n\n<span data-loaded="true" style="left:',(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===u?o.apply(t):o),s+=a(o)+';float:left;display:block;position:absolute;height:40px;width:86px;border:1px solid #ccc;" href="#">\n	',(o=n.text)?o=o.call(t,{hash:{},data:i}):(o=t.text,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n</span>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-text",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("context-slider-scrappy-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.contextData=e.clone(t.context,!0),this.currentPosition=0,this.numberOfPhotosEitherSideInViewPort=3,this.numberOfPositionsToMove=3,this.numberOfPositionsToBuffer=3,this.positionsLoadedNext=0,this.positionsLoadedPrev=0,this.positionsAheadLimit=25,this.numberOfPositionsToPreFetch=t.numberOfPositionsToPreFetch,this.numberOfPositionsToRefetchAt=t.numberOfPositionsToRefetchAt,this.photoWidth=50,this.photoMargin=15,this.photoWidthPlusMargin=65,this.photoWidthSmall=20,this.photoMarginSmall=5,this.photoWidthPlusMarginSmall=25,this.atStart=!1,this.atEnd=!1,this.isAd=!!t.ad,this.photosInSlider={},!YUI.Env.isServer&&e.StorageHelper.getItem("slideshowInProgress")==="true"?this.slideshowInProgress=!0:this.slideshowInProgress=!1,this.slideshowDwellSeconds=5,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var t=this,n=t.contextData,r=new e.FlickrPromise({photo:t.appContext.getModel("photo-models",t.photoId),context:t.appContext.getModel(n.modelName,n.params)});return r.then(function(e){t.set("photo",e.photo),t.set("contextModel",e.context)},function(e){if(!e.getModelFailure&&e.code!==1||n.modelName==="photostream-models")throw e;return t.contextData.modelName="photostream-models",t.appContext.getModel("photo-models",t.photoId).then(function(e){return t.set("photo",e),t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.appContext.getModel("photostream-models",t.contextData.params).then(function(e){t.set("contextModel",e)})})}).then(function(){var r=e.merge(n.params,{photoId:t.photoId,numNext:t.numberOfPositionsToPreFetch,numPrev:t.numberOfPositionsToPreFetch,refetchAt:t.numberOfPositionsToRefetchAt});return t.get("contextModel").getValue("photoContextList").getContext(r)}).then(function(e){t.positionsLoadedNext=t.positionsLoadedNext+e.next.length,t.positionsLoadedPrev=t.positionsLoadedPrev+e.previous.length,t.photosInSlider[0]=t.get("photo").getValue("id"),t.set("initialContextResponse",e)},function(e){if(e.notInContext||e.code===99)return t.get("contextModel").setValue("photoContextList",[]),t.contextData.modelName="photostream-models",t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.loadState();throw e}).then(null,function(t){throw e.Flog.warn("There was a problem loading the context slider data.",t&&t.message?t.message:t,t&&t.stack?t.stack:""),t})},assignContextPositionsAndAddToDOM:function(e){var t=this.get("container"),n=t.one(".small-slider .slider"),r=t.one(".big-slider .slider"),i=e.contextResponse,s,o,u;for(u=0;u<i.previous.length;u++)o=-1-u,typeof this.photosInSlider[o]=="undefined"&&(s=i.previous[u].toJSON(),this.photosInSlider[o]=i.previous[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.previous[u]),s.url=this.getContextifiedURLForPhoto(i.previous[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)));for(u=0;u<i.next.length;u++)o=1+u,typeof this.photosInSlider[o]=="undefined"&&(s=i.next[u].toJSON(),this.photosInSlider[o]=i.next[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.next[u]),s.url=this.getContextifiedURLForPhoto(i.next[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)))},checkBoundary:function(e){var t=e.contextResponse,n=e.requestedPreviousAmount,r=e.requestedNextAmount,i=e.positionWhenChecking,s=this.get("contextModel").getValue("photoContextList"),o=this.get("container"),u=o.one(".nav-l"),a=o.one(".nav-r");this.currentPosition-this.numberOfPhotosEitherSideInViewPort>this.positionsLoadedNext&&this.move(-Math.abs(this.currentPosition-this.positionsLoadedNext)),this.currentPosition<0&&Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)>this.positionsLoadedPrev&&this.move(Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)-this.positionsLoadedPrev),s.hasMinBoundary()&&t.previous.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&n>0&&(u.hide(),this.atStart=!0),s.hasMaxBoundary()&&t.next.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&r>0&&(a.hide(),this.atEnd=!0)},buildContainer:function(){function a(e,r,i,s){e>3&&(e=3);var o=t[r],u="";for(var a=0;a<e;a++){var f=o[a],l=f.toJSON(),c=(a+1)*n.photoWidthPlusMarginSmall*s;l.background=n.getBackgroundImage(f),l.currentPhoto=!1,l.url=n.getContextifiedURLForPhoto(f),l.left=c/n.photoWidthPlusMarginSmall*n.photoWidthPlusMargin,u+=n.templates("context-slider-photo")(l),l.left=c,i.push(l),n.photosInSlider[""+(a+1)*s]=l}return u}var e=this.get("photo").toJSON(),t=this.get("initialContextResponse"),n=this,r;e.background=this.getBackgroundImage(this.get("photo")),e.left=0,e.currentPhoto=!0,e.url=this.getContextifiedURLForPhoto(this.get("photo"));var i=[],s=[],o="",u="";this.positionsLoadedNext>0&&(u=a(this.positionsLoadedNext,"next",i,1)),this.positionsLoadedPrev>0&&(o=a(this.positionsLoadedPrev,"previous",s,-1)),r=this.templates("context-slider-scrappy")({previousPhotos:s,nextPhotos:i,previousBigPhotos:o,nextBigPhotos:u,currentPhoto:[e],slideshowEnabled:this.appContext.flipper.isFlipped("enable-photopage-slideshow"),"is-ad":this.isAd,showBigSlider:!this.appContext.forceServerRender}),this.isAd&&(t.next.pop(),t.next=[this.get("photo")].concat(t.next)),this.setContainerHTML(r)},buildErrorContainer:function(){this.setContainerHTML(this.templates("context-slider-scrappy")({loadingError:!0}))},activate:function(){var t=this,n=t.get("container"),r=n.one(".big-slider"),i=!1,s,o,u=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,a=this.numberOfPhotosEitherSideInViewPort;return this.assignContextPositionsAndAddToDOM({contextResponse
:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a}),this.checkBoundary({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a,positionWhenChecking:this.currentPosition}),e.StorageHelper.getItem("showBigContextSlider")==="true"?(n.addClass("hover"),setTimeout(function(){n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")},300)):(n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")),this.appContext.flipper.isFlipped("enable-photopage-slideshow")&&(this.slideshowInProgress&&this.startSlideshow(),this.registerEventHandler(this.get("container").all(".currentImage").on("click",function(e){e.preventDefault(),t.slideshowInProgress?t.stopSlideshow():t.startSlideshow()}))),e.use("transition",function(e){var a=t.get("container").one(".nav-l"),f=t.get("container").one(".nav-r");a&&t.registerEventHandler(a.on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveLeftClick"),t.move(-1*t.numberOfPositionsToMove)})),f&&t.registerEventHandler(f.on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveRightClick"),t.move(1*t.numberOfPositionsToMove)})),u&&(t.attachKeyEvent("down:188",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveLeftKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atStart||t.move(-1*t.numberOfPositionsToMove)},20)),t.attachKeyEvent("down:190",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveRightKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atEnd||t.move(1*t.numberOfPositionsToMove)},20))),t.registerEventHandler(n.on("hover",function(){i=!0,clearTimeout(s),s=setTimeout(function(){i&&n.addClass("hover")},150)},function(){i=!1,clearTimeout(o),e.StorageHelper.setItem("showBigContextSlider","false"),o=setTimeout(function(){i||(n.setStyles({width:"100%",height:"80px"}),r.setStyle("height","80px"),n.removeClass("hover"),setTimeout(function(){n.removeAttribute("style"),r.removeAttribute("style")},300))},500)})),t.registerEventHandler(n.all(".context-thumb:not(.currentImage)").on("click",function(){e.StorageHelper.setItem("showBigContextSlider","true")}))}),this},startSlideshow:function(){function s(){if(r===0&&t.slideshowInProgress){t.appContext.flapp.navigate(n);return}i.all(".currentImage .countdown-slideshow").set("text",r),r-=1}this.slideshowInProgress=!0;var t=this,n=this.getContextifiedURLForPhoto(this.get("initialContextResponse").next[0]),r=this.slideshowDwellSeconds,i=this.get("container");e.StorageHelper.setItem("slideshowInProgress","true"),i.all(".currentImage .play-slideshow").hide(),s(),this.slideshowTimer=setInterval(function(){s()},1e3)},stopSlideshow:function(){this.slideshowInProgress=!1,this.get("container").all(".currentImage .countdown-slideshow").set("text",""),this.get("container").all(".currentImage .play-slideshow").show(),clearInterval(this.slideshowTimer),e.StorageHelper.setItem("slideshowInProgress","false")},move:function(t){var n=this,r=this.get("contextModel").getValue("photoContextList"),i=t>0?"right":"left",s=this.get("container"),o=s.one(".big-slider .slider"),u=s.one(".small-slider .slider"),a,f,l,c,h,p=s.one(".nav-l"),d=s.one(".nav-r"),v;if(i==="right"&&this.currentPosition-this.positionsLoadedNext>this.positionsAheadLimit)return!1;if(i==="left"&&this.currentPosition<=0&&Math.abs(this.currentPosition)-this.positionsLoadedPrev>this.positionsAheadLimit)return!1;s.addClass("hover"),this.currentPosition+=t,v=this.currentPosition,typeof this.photosInSlider[this.currentPosition+this.numberOfPhotosEitherSideInViewPort+1]!="undefined"&&(d.show(),this.atEnd=!1),typeof this.photosInSlider[this.currentPosition-(this.numberOfPhotosEitherSideInViewPort+1)]!="undefined"&&(p.show(),this.atStart=!1),a=this.currentPosition*this.photoWidthPlusMargin*-1,f=this.currentPosition*this.photoWidthPlusMarginSmall*-1,o.transition({left:a+"px",duration:.3,easing:"ease-out"}),u.setStyle("left",f+"px"),i==="right"?c=this.currentPosition+this.numberOfPositionsToMove+this.numberOfPositionsToBuffer:i==="left"&&(c=this.currentPosition-(this.numberOfPositionsToMove+this.numberOfPositionsToBuffer)),l=typeof this.photosInSlider[c]=="undefined",l&&(h=e.merge(n.contextData.params,{photoId:this.get("photo").getValue("id"),refetchAt:this.numberOfPositionsToRefetchAt}),i==="right"?h.numNext=Math.abs(c)+this.numberOfPositionsToPreFetch:i==="left"&&(h.numPrev=Math.abs(c)+this.numberOfPositionsToPreFetch),r.getContext(h).then(function(e){n.positionsLoadedNext=typeof h.numNext!="undefined"?h.numNext:n.positionsLoadedNext,n.positionsLoadedPrev=typeof h.numPrev!="undefined"?h.numPrev:n.positionsLoadedPrev,n.assignContextPositionsAndAddToDOM({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext}),n.checkBoundary({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})},function(e){n.checkBoundary({contextResponse:{previous:[],next:[]},requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})}))},getBackgroundImage:function(e){var t,n=this.appContext.getViewer().getPixelRatio(),r;return t={width:this.photoWidth*n,height:this.photoWidth*n},r={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},e.getSizeToFit(t,r).url},getContextifiedURLForPhoto:function(t){if(t){var n=e.URLHelper.getPhotoPage({photoId:t.getValue("id"),pathAlias:t.getValue("owner").getValue("pathAlias"),contextSuffix:this.get("contextModel").getValue("urlSuffix")});return n}},beforeDestroy:function(){clearInterval(this.slideshowTimer)}})},"@VERSION@",{requires:["flickr-view","flog","hermes-template-context-slider-scrappy","hermes-template-context-slider-photo","hermes-template-context-image"
,"hermes-template-context-text","context-slider-scrappy-css","storage-helper"],optional:[],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-photo-engagement",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+='\n	<div class="wallart',i=n["if"].call(e,e.isWallartLowQuality,{hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t});if(i||i===0)r+=i;return r+='">\n		<a href="#" title="',s={hash:{intlName:"photo-page-scrappy.CREATE_WALLART_WITH_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n			<i class="ui-icon-wallart"></i>\n		</a>\n	</div>\n',r}function d(e,t){return" dimmed"}function v(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["photo-well-scrappy-edit-view"],s):l.call(e,"outlet",e["photo-well-scrappy-edit-view"],s)))+"\n",r}function m(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["fave-view"],s):l.call(e,"outlet",e["fave-view"],s)))+"\n",r}function g(e,t){return"disabled"}function y(e,t){var r="",i,s;return r+='\n		<a href="',(i=n.downloadLink)?i=i.call(e,{hash:{},data:t}):(i=e.downloadLink,i=typeof i===h?i.apply(e):i),r+=c(i)+'" class="server-only-link" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_VIDEO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function b(e,t){var r="",i,s;return r+='\n		<a href="',(i=n.downloadLink)?i=i.call(e,{hash:{},data:t}):(i=e.downloadLink,i=typeof i===h?i.apply(e):i),r+=c(i)+'" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function w(e,t){var r="",i,s;return r+='\n		<div class="display-obscured-download-sizes">\n			',s={hash:{},data:t},r+=c((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.downloadItems,s):l.call(e,"renderTrustedMarkup",e.downloadItems,s)))+"\n		</div>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression,h="function";a={hash:{},data:i},s+=c((o=n.outlet||t.outlet,o?o.call(t,t["vr-engagement-view"],a):l.call(t,"outlet",t["vr-engagement-view"],a)))+"\n\n",u=n["if"].call(t,t.canCreateWallart,{hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n",u=n["if"].call(t,t.viewerIsOwner,{hash:{},inverse:f.program(6,m,i),fn:f.program(4,v,i),data:i});if(u||u===0)s+=u;s+="\n\n",a={hash:{},data:i},s+=c((o=n.outlet||t.outlet,o?o.call(t,t["share-view"],a):l.call(t,"outlet",t["share-view"],a)))+'\n\n<div class="download ',u=n.unless.call(t,t.downloadingAvailable,{hash:{},inverse:f.noop,fn:f.program(8,g,i),data:i});if(u||u===0)s+=u;s+='">\n	',u=n["if"].call(t,t.isVideo,{hash:{},inverse:f.program(12,b,i),fn:f.program(10,y,i),data:i});if(u||u===0)s+=u;s+='\n			<i class="ui-icon-download"></i>\n		</a>\n\n	',u=n["if"].call(t,t.downloadItems,{hash:{},inverse:f.noop,fn:f.program(14,w,i),data:i});if(u||u===0)s+=u;return s+="\n\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-engagement",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
